<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Execution of data quality rules (for v5 and above) — achillesHeel • Achilles</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Execution of data quality rules (for v5 and above) — achillesHeel" />
<meta property="og:description" content="achillesHeel executes data quality rules (or checks) on pre-computed analyses (or measures)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Achilles</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/RunningAchilles.html">Running Achilles on Your CDM</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Execution of data quality rules (for v5 and above)</h1>
    
    <div class="hidden name"><code>achillesHeel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>achillesHeel</code> executes data quality rules (or checks) on pre-computed analyses (or measures).</p>
    </div>

    <pre class="usage"><span class='fu'>achillesHeel</span><span class='op'>(</span>
  <span class='va'>connectionDetails</span>,
  <span class='va'>cdmDatabaseSchema</span>,
  resultsDatabaseSchema <span class='op'>=</span> <span class='va'>cdmDatabaseSchema</span>,
  scratchDatabaseSchema <span class='op'>=</span> <span class='va'>resultsDatabaseSchema</span>,
  oracleTempSchema <span class='op'>=</span> <span class='va'>scratchDatabaseSchema</span>,
  vocabDatabaseSchema <span class='op'>=</span> <span class='va'>cdmDatabaseSchema</span>,
  cdmVersion <span class='op'>=</span> <span class='st'>"5"</span>,
  numThreads <span class='op'>=</span> <span class='fl'>1</span>,
  tempHeelPrefix <span class='op'>=</span> <span class='st'>"tmpheel"</span>,
  dropScratchTables <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ThresholdAgeWarning <span class='op'>=</span> <span class='fl'>125</span>,
  ThresholdOutpatientVisitPerc <span class='op'>=</span> <span class='fl'>0.43</span>,
  ThresholdMinimalPtMeasDxRx <span class='op'>=</span> <span class='fl'>20.5</span>,
  <span class='va'>outputFolder</span>,
  sqlOnly <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verboseMode <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>connectionDetails</th>
      <td><p>An R object of type <code>connectionDetails</code> created using the function <code>createConnectionDetails</code> in the <code>DatabaseConnector</code> package.</p></td>
    </tr>
    <tr>
      <th>cdmDatabaseSchema</th>
      <td><p>string name of database schema that contains OMOP CDM. On SQL Server, this should specifiy both the database and the schema, so for example 'cdm_instance.dbo'.</p></td>
    </tr>
    <tr>
      <th>resultsDatabaseSchema</th>
      <td><p>string name of database schema that we can write final results to. Default is cdmDatabaseSchema. On SQL Server, this should specifiy both the database and the schema, 
so for example 'results.dbo'.</p></td>
    </tr>
    <tr>
      <th>scratchDatabaseSchema</th>
      <td><p>(OPTIONAL, multi-threaded mode) Name of a fully qualified schema that is accessible to/from the resultsDatabaseSchema, that can store all of the scratch tables. Default is resultsDatabaseSchema.</p></td>
    </tr>
    <tr>
      <th>oracleTempSchema</th>
      <td><p>For Oracle only: the name of the database schema where you want all temporary tables to be managed. Requires create/insert permissions to this database.</p></td>
    </tr>
    <tr>
      <th>vocabDatabaseSchema</th>
      <td><p>String name of database schema that contains OMOP Vocabulary. Default is cdmDatabaseSchema. On SQL Server, this should specifiy both the database and the schema, so for example 'results.dbo'.</p></td>
    </tr>
    <tr>
      <th>cdmVersion</th>
      <td><p>Define the OMOP CDM version used:  currently supports v5 and above.  Default = "5".</p></td>
    </tr>
    <tr>
      <th>numThreads</th>
      <td><p>(OPTIONAL, multi-threaded mode) The number of threads to use to run Achilles in parallel. Default is 1 thread.</p></td>
    </tr>
    <tr>
      <th>tempHeelPrefix</th>
      <td><p>(OPTIONAL, multi-threaded mode) The prefix to use for the "temporary" (but actually permanent) Heel tables. Default is "tmpheel"</p></td>
    </tr>
    <tr>
      <th>dropScratchTables</th>
      <td><p>(OPTIONAL, multi-threaded mode) TRUE = drop the scratch tables (may take time depending on dbms), FALSE = leave them in place</p></td>
    </tr>
    <tr>
      <th>ThresholdAgeWarning</th>
      <td><p>The maximum age to allow in Heel</p></td>
    </tr>
    <tr>
      <th>ThresholdOutpatientVisitPerc</th>
      <td><p>The maximum percentage of outpatient visits among all visits</p></td>
    </tr>
    <tr>
      <th>ThresholdMinimalPtMeasDxRx</th>
      <td><p>The minimum percentage of patients with at least 1 Measurement, 1 Dx, and 1 Rx</p></td>
    </tr>
    <tr>
      <th>outputFolder</th>
      <td><p>Path to store logs and SQL files</p></td>
    </tr>
    <tr>
      <th>sqlOnly</th>
      <td><p>Boolean to determine if Heel should be fully executed. TRUE = just generate SQL files, don't actually run, FALSE = run Achilles Heel</p></td>
    </tr>
    <tr>
      <th>verboseMode</th>
      <td><p>Boolean to determine if the console will show all execution steps. Default = TRUE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The full Heel SQL code</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>achillesHeel</code> contains number of rules (authored in SQL) that are executed against achilles results tables.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>connectionDetails</span> <span class='op'>&lt;-</span> <span class='fu'>createConnectionDetails</span><span class='op'>(</span>dbms<span class='op'>=</span><span class='st'>"sql server"</span>, server<span class='op'>=</span><span class='st'>"some_server"</span><span class='op'>)</span>
  <span class='va'>achillesHeel</span> <span class='op'>&lt;-</span> <span class='fu'>achillesHeel</span><span class='op'>(</span>connectionDetails <span class='op'>=</span> <span class='va'>connectionDetails</span>, 
                               cdmDatabaseSchema <span class='op'>=</span> <span class='st'>"cdm"</span>, 
                               resultsDatabaseSchema <span class='op'>=</span> <span class='st'>"results"</span>, 
                               scratchDatabaseSchema <span class='op'>=</span> <span class='st'>"scratch"</span>,
                               vocabDatabaseSchema <span class='op'>=</span> <span class='st'>"vocab"</span>,
                               cdmVersion <span class='op'>=</span> <span class='st'>"5.3.0"</span>,
                               numThreads <span class='op'>=</span> <span class='fl'>10</span>,
                               outputFolder <span class='op'>=</span> <span class='st'>"output"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Frank DeFalco, Patrick Ryan, Martijn Schuemie, Vojtech Huser, Chris Knoll, Ajit Londhe, Taha Abdul-Basser.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


